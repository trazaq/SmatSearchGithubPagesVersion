import{x as se,n as F,r as ae,t as re,s as oe}from"../chunks/scheduler.DJYInx9Y.js";import{S as Z,i as ee,e as _,s as y,c as p,a as q,d as $,f as S,m as te,o as E,u as U,g as A,h as s,B as J,p as K,E as le,t as I,b as M,j as R,x as ne,n as ie,y as ce,z as he,k as de,l as ue,A as fe}from"../chunks/index.Df59Zr1i.js";import{e as Q}from"../chunks/each.D6YF6ztN.js";const V=" Prod ",j="SmatSearchGithubPagesVersion.github.io",_e=async({fetch:t,url:e,route:n,params:f})=>{let a;return a=me().map(l=>{const h=pe(l);return{...l,link:h,site_process_thread_port:`${l.site} ${l.process} ${l.thread} ${l.ip} ${l.port}`.toLowerCase()}}),{all_threads:a}};function pe(t){const e=new Date().toLocaleDateString("sv-SE");let n="";return t.insave=="1"&&t.outsave=="1"&&(n=`/${j}/api/select_smat?site=${t.site}&process=${t.process}&thread_name=${t.thread}&search=99999999999999999999&infile=${t.infile}&outfile=${t.outfile}&date=${e}`),t.insave=="1"&&t.outsave=="0"&&(n=`/${j}/api/search?site=${t.site}&process=${t.process}&thread_name=${t.thread}&search=99999999999999999999&smat_file=${t.infile}&date=${e}`),t.insave=="0"&&t.outsave=="1"&&(n=`/${j}/api/search?site=${t.site}&process=${t.process}&thread_name=${t.thread}&search=99999999999999999999&smat_file=${t.outfile}&date=${e}`),t.insave=="0"&&t.outsave=="0"&&(n=`/${j}/api/error?site=${t.site}&process=${t.process}&thread_name=${t.thread}&search=99999999999999999999&smat_file=&date=${e}`),t.insave==""&&t.outsave==""&&(n=`/${j}/api/error?site=${t.site}&process=${t.process}&thread_name=${t.thread}&search=99999999999999999999&smat_file=&date=${e}`),n}function me(){return[{site:"verity",process:"verity",thread:"testdb1",ip:"localhost",port:"8080",insave:"1",infile:"testdb1",outsave:"0",outfile:""},{site:"verity",process:"verity",thread:"no_smat_configured",ip:"",port:"",insave:"0",infile:"",outsave:"0",outfile:""},{site:"verity",process:"verity",thread:"both_smat_configured",ip:"",port:"",insave:"1",infile:"testdb1",outsave:"1",outfile:"testdb1"}]}const ke=Object.freeze(Object.defineProperty({__proto__:null,load:_e},Symbol.toStringTag,{value:"Module"}));function W(t,e,n){const f=t.slice();return f[7]=e[n],f}function X(t){let e,n,f=t[7].ip+"",a,l,h,v=t[7].port+"",k,C,c,g=t[7].site+"",B,D,L,b=t[7].process+"",T,d,i,r,o=t[7].thread+"",u,w,H;return{c(){e=_("tr"),n=_("td"),a=I(f),l=y(),h=_("td"),k=I(v),C=y(),c=_("td"),B=I(g),D=y(),L=_("td"),T=I(b),d=y(),i=_("td"),r=_("a"),u=I(o),H=y(),this.h()},l(P){e=p(P,"TR",{});var m=q(e);n=p(m,"TD",{});var N=q(n);a=M(N,f),N.forEach($),l=S(m),h=p(m,"TD",{});var O=q(h);k=M(O,v),O.forEach($),C=S(m),c=p(m,"TD",{});var z=q(c);B=M(z,g),z.forEach($),D=S(m),L=p(m,"TD",{});var G=q(L);T=M(G,b),G.forEach($),d=S(m),i=p(m,"TD",{});var Y=q(i);r=p(Y,"A",{href:!0});var x=q(r);u=M(x,o),x.forEach($),Y.forEach($),H=S(m),m.forEach($),this.h()},h(){E(r,"href",w=t[7].link)},m(P,m){A(P,e,m),s(e,n),s(n,a),s(e,l),s(e,h),s(h,k),s(e,C),s(e,c),s(c,B),s(e,D),s(e,L),s(L,T),s(e,d),s(e,i),s(i,r),s(r,u),s(e,H)},p(P,m){m&2&&f!==(f=P[7].ip+"")&&R(a,f),m&2&&v!==(v=P[7].port+"")&&R(k,v),m&2&&g!==(g=P[7].site+"")&&R(B,g),m&2&&b!==(b=P[7].process+"")&&R(T,b),m&2&&o!==(o=P[7].thread+"")&&R(u,o),m&2&&w!==(w=P[7].link)&&E(r,"href",w)},d(P){P&&$(e)}}}function $e(t){let e,n,f,a,l,h,v,k,C,c,g,B='<th class="svelte-1hqcco0">IP</th> <th class="svelte-1hqcco0">Port</th> <th class="svelte-1hqcco0">Site</th> <th class="svelte-1hqcco0">Process</th> <th class="svelte-1hqcco0">Thread</th>',D,L,b,T=Q(t[1]),d=[];for(let i=0;i<T.length;i+=1)d[i]=X(W(t,T,i));return{c(){e=_("div"),n=_("label"),f=y(),a=_("input"),l=y(),h=_("br"),v=y(),k=_("br"),C=y(),c=_("table"),g=_("tr"),g.innerHTML=B,D=y();for(let i=0;i<d.length;i+=1)d[i].c();this.h()},l(i){e=p(i,"DIV",{class:!0});var r=q(e);n=p(r,"LABEL",{for:!0}),q(n).forEach($),f=S(r),a=p(r,"INPUT",{type:!0,autocomplete:!0,placeholder:!0,id:!0,style:!0,class:!0}),l=S(r),h=p(r,"BR",{}),v=S(r),k=p(r,"BR",{}),C=S(r),c=p(r,"TABLE",{id:!0,class:!0});var o=q(c);g=p(o,"TR",{"data-svelte-h":!0}),te(g)!=="svelte-1vs3quf"&&(g.innerHTML=B),D=S(o);for(let u=0;u<d.length;u+=1)d[u].l(o);o.forEach($),r.forEach($),this.h()},h(){E(n,"for","searchbox"),a.autofocus=!0,E(a,"type","search"),E(a,"autocomplete","off"),E(a,"placeholder","Search for a Thread, IP/DNS, Port"),E(a,"id","searchbox"),U(a,"text-align","center"),E(a,"class","svelte-1hqcco0"),E(c,"id","live_thread_list"),E(c,"class","svelte-1hqcco0"),E(e,"class","SearchThreads svelte-1hqcco0")},m(i,r){A(i,e,r),s(e,n),s(e,f),s(e,a),J(a,t[0]),s(e,l),s(e,h),s(e,v),s(e,k),s(e,C),s(e,c),s(c,g),s(c,D);for(let o=0;o<d.length;o+=1)d[o]&&d[o].m(c,null);a.focus(),L||(b=[K(a,"input",t[4]),K(a,"input",t[2])],L=!0)},p(i,[r]){if(r&1&&a.value!==i[0]&&J(a,i[0]),r&2){T=Q(i[1]);let o;for(o=0;o<T.length;o+=1){const u=W(i,T,o);d[o]?d[o].p(u,r):(d[o]=X(u),d[o].c(),d[o].m(c,null))}for(;o<d.length;o+=1)d[o].d(1);d.length=T.length}},i:F,o:F,d(i){i&&$(e),le(d,i),L=!1,ae(b)}}}function ge(t,e,n){let{all_threads:f=[]}=e,a="",l=[];const h=async()=>{await re(),n(1,l=a?f.filter(c=>c.site_process_thread_port.includes(a.toLowerCase())):[])},v=[];async function k(c){c.inputType==="deleteContentBackward"&&c.target.value!==""?(v.forEach(g=>clearTimeout(g)),v.length=0,v.push(setTimeout(h,250))):await h()}function C(){a=this.value,n(0,a)}return t.$$set=c=>{"all_threads"in c&&n(3,f=c.all_threads)},[a,l,k,f,C]}class ve extends Z{constructor(e){super(),ee(this,e,ge,$e,se,{all_threads:3})}}function be(t){let e,n,f=`root {
			background-color: #242424;
			color: rgba(255, 255, 255, 0.87);
		}
		body {
			background-color: #242424;
			color: rgba(255, 255, 255, 0.87);
		}
		input {
			color-scheme: light dark;
		}`,a,l,h,v,k,C,c,g,B,D,L,b,T,d,i;return b=new ve({props:{all_threads:t[0].all_threads}}),{c(){e=_("meta"),n=_("style"),n.textContent=f,a=y(),l=_("div"),h=_("h1"),v=I("Cloverleaf Message Search ("),k=I(V),C=I(")"),c=y(),g=_("br"),B=y(),D=_("br"),L=y(),ne(b.$$.fragment),T=y(),d=_("br"),this.h()},l(r){const o=ie("svelte-1o3bo81",document.head);e=p(o,"META",{name:!0,content:!0}),n=p(o,"STYLE",{"data-svelte-h":!0}),te(n)!=="svelte-68gpa"&&(n.textContent=f),o.forEach($),a=S(r),l=p(r,"DIV",{class:!0});var u=q(l);h=p(u,"H1",{style:!0,class:!0});var w=q(h);v=M(w,"Cloverleaf Message Search ("),k=M(w,V),C=M(w,")"),w.forEach($),c=S(u),g=p(u,"BR",{}),B=S(u),D=p(u,"BR",{}),L=S(u),ce(b.$$.fragment,u),T=S(u),d=p(u,"BR",{}),u.forEach($),this.h()},h(){document.title="Cloverleaf Message Search",E(e,"name","description"),E(e,"content",""),U(h,"color",t[1]),E(h,"class","svelte-1hcxbhj"),E(l,"class","app svelte-1hcxbhj")},m(r,o){s(document.head,e),s(document.head,n),A(r,a,o),A(r,l,o),s(l,h),s(h,v),s(h,k),s(h,C),s(l,c),s(l,g),s(l,B),s(l,D),s(l,L),he(b,l,null),s(l,T),s(l,d),i=!0},p(r,[o]){(!i||o&2)&&U(h,"color",r[1]);const u={};o&1&&(u.all_threads=r[0].all_threads),b.$set(u)},i(r){i||(de(b.$$.fragment,r),i=!0)},o(r){ue(b.$$.fragment,r),i=!1},d(r){r&&($(a),$(l)),$(e),$(n),fe(b)}}}function Te(t,e,n){let{data:f}=e,a;return V.toLowerCase().includes("prod")?a="springgreen":a="navajowhite",t.$$set=l=>{"data"in l&&n(0,f=l.data)},[f,a]}class Ce extends Z{constructor(e){super(),ee(this,e,Te,be,oe,{data:0})}}export{Ce as component,ke as universal};
