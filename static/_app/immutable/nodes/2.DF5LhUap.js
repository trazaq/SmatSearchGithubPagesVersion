import{x as te,n as F,r as se,t as ae,s as re}from"../chunks/scheduler.DJYInx9Y.js";import{S as X,i as Z,e as _,s as y,c as p,a as B,d as v,f as S,m as ee,o as E,u as H,g as I,h as s,B as G,p as J,E as oe,t as M,b as R,j,x as le,n as ne,y as ie,z as ce,k as he,l as de,A as ue}from"../chunks/index.Df59Zr1i.js";import{e as K}from"../chunks/each.D6YF6ztN.js";const fe=async({fetch:t,url:e,route:n,params:f})=>{let a;return a=pe().map(l=>{const h=_e(l);return{...l,link:h,site_process_thread_port:`${l.site} ${l.process} ${l.thread} ${l.ip} ${l.port}`.toLowerCase()}}),{all_threads:a}};function _e(t){const e=new Date().toLocaleDateString("sv-SE");let n="";return t.insave=="1"&&t.outsave=="1"&&(n=`/api/select_smat?site=${t.site}&process=${t.process}&thread_name=${t.thread}&search=99999999999999999999&infile=${t.infile}&outfile=${t.outfile}&date=${e}`),t.insave=="1"&&t.outsave=="0"&&(n=`/api/search?site=${t.site}&process=${t.process}&thread_name=${t.thread}&search=99999999999999999999&smat_file=${t.infile}&date=${e}`),t.insave=="0"&&t.outsave=="1"&&(n=`/api/search?site=${t.site}&process=${t.process}&thread_name=${t.thread}&search=99999999999999999999&smat_file=${t.outfile}&date=${e}`),t.insave=="0"&&t.outsave=="0"&&(n=`/api/error?site=${t.site}&process=${t.process}&thread_name=${t.thread}&search=99999999999999999999&smat_file=&date=${e}`),t.insave==""&&t.outsave==""&&(n=`/api/error?site=${t.site}&process=${t.process}&thread_name=${t.thread}&search=99999999999999999999&smat_file=&date=${e}`),n}function pe(){return[{site:"verity",process:"verity",thread:"testdb1",ip:"localhost",port:"8080",insave:"1",infile:"testdb1",outsave:"0",outfile:""},{site:"verity",process:"verity",thread:"no_smat_configured",ip:"",port:"",insave:"0",infile:"",outsave:"0",outfile:""},{site:"verity",process:"verity",thread:"both_smat_configured",ip:"",port:"",insave:"1",infile:"testdb1",outsave:"1",outfile:"testdb1"}]}const Se=Object.freeze(Object.defineProperty({__proto__:null,load:fe},Symbol.toStringTag,{value:"Module"})),N=" Prod ";function Q(t,e,n){const f=t.slice();return f[7]=e[n],f}function W(t){let e,n,f=t[7].ip+"",a,l,h,b=t[7].port+"",k,C,c,g=t[7].site+"",D,P,L,$=t[7].process+"",T,d,i,r,o=t[7].thread+"",u,w,A;return{c(){e=_("tr"),n=_("td"),a=M(f),l=y(),h=_("td"),k=M(b),C=y(),c=_("td"),D=M(g),P=y(),L=_("td"),T=M($),d=y(),i=_("td"),r=_("a"),u=M(o),A=y(),this.h()},l(q){e=p(q,"TR",{});var m=B(e);n=p(m,"TD",{});var U=B(n);a=R(U,f),U.forEach(v),l=S(m),h=p(m,"TD",{});var V=B(h);k=R(V,b),V.forEach(v),C=S(m),c=p(m,"TD",{});var z=B(c);D=R(z,g),z.forEach(v),P=S(m),L=p(m,"TD",{});var O=B(L);T=R(O,$),O.forEach(v),d=S(m),i=p(m,"TD",{});var Y=B(i);r=p(Y,"A",{href:!0});var x=B(r);u=R(x,o),x.forEach(v),Y.forEach(v),A=S(m),m.forEach(v),this.h()},h(){E(r,"href",w=t[7].link)},m(q,m){I(q,e,m),s(e,n),s(n,a),s(e,l),s(e,h),s(h,k),s(e,C),s(e,c),s(c,D),s(e,P),s(e,L),s(L,T),s(e,d),s(e,i),s(i,r),s(r,u),s(e,A)},p(q,m){m&2&&f!==(f=q[7].ip+"")&&j(a,f),m&2&&b!==(b=q[7].port+"")&&j(k,b),m&2&&g!==(g=q[7].site+"")&&j(D,g),m&2&&$!==($=q[7].process+"")&&j(T,$),m&2&&o!==(o=q[7].thread+"")&&j(u,o),m&2&&w!==(w=q[7].link)&&E(r,"href",w)},d(q){q&&v(e)}}}function me(t){let e,n,f,a,l,h,b,k,C,c,g,D='<th class="svelte-1hqcco0">IP</th> <th class="svelte-1hqcco0">Port</th> <th class="svelte-1hqcco0">Site</th> <th class="svelte-1hqcco0">Process</th> <th class="svelte-1hqcco0">Thread</th>',P,L,$,T=K(t[1]),d=[];for(let i=0;i<T.length;i+=1)d[i]=W(Q(t,T,i));return{c(){e=_("div"),n=_("label"),f=y(),a=_("input"),l=y(),h=_("br"),b=y(),k=_("br"),C=y(),c=_("table"),g=_("tr"),g.innerHTML=D,P=y();for(let i=0;i<d.length;i+=1)d[i].c();this.h()},l(i){e=p(i,"DIV",{class:!0});var r=B(e);n=p(r,"LABEL",{for:!0}),B(n).forEach(v),f=S(r),a=p(r,"INPUT",{type:!0,autocomplete:!0,placeholder:!0,id:!0,style:!0,class:!0}),l=S(r),h=p(r,"BR",{}),b=S(r),k=p(r,"BR",{}),C=S(r),c=p(r,"TABLE",{id:!0,class:!0});var o=B(c);g=p(o,"TR",{"data-svelte-h":!0}),ee(g)!=="svelte-1vs3quf"&&(g.innerHTML=D),P=S(o);for(let u=0;u<d.length;u+=1)d[u].l(o);o.forEach(v),r.forEach(v),this.h()},h(){E(n,"for","searchbox"),a.autofocus=!0,E(a,"type","search"),E(a,"autocomplete","off"),E(a,"placeholder","Search for a Thread, IP/DNS, Port"),E(a,"id","searchbox"),H(a,"text-align","center"),E(a,"class","svelte-1hqcco0"),E(c,"id","live_thread_list"),E(c,"class","svelte-1hqcco0"),E(e,"class","SearchThreads svelte-1hqcco0")},m(i,r){I(i,e,r),s(e,n),s(e,f),s(e,a),G(a,t[0]),s(e,l),s(e,h),s(e,b),s(e,k),s(e,C),s(e,c),s(c,g),s(c,P);for(let o=0;o<d.length;o+=1)d[o]&&d[o].m(c,null);a.focus(),L||($=[J(a,"input",t[4]),J(a,"input",t[2])],L=!0)},p(i,[r]){if(r&1&&a.value!==i[0]&&G(a,i[0]),r&2){T=K(i[1]);let o;for(o=0;o<T.length;o+=1){const u=Q(i,T,o);d[o]?d[o].p(u,r):(d[o]=W(u),d[o].c(),d[o].m(c,null))}for(;o<d.length;o+=1)d[o].d(1);d.length=T.length}},i:F,o:F,d(i){i&&v(e),oe(d,i),L=!1,se($)}}}function ve(t,e,n){let{all_threads:f=[]}=e,a="",l=[];const h=async()=>{await ae(),n(1,l=a?f.filter(c=>c.site_process_thread_port.includes(a.toLowerCase())):[])},b=[];async function k(c){c.inputType==="deleteContentBackward"&&c.target.value!==""?(b.forEach(g=>clearTimeout(g)),b.length=0,b.push(setTimeout(h,250))):await h()}function C(){a=this.value,n(0,a)}return t.$$set=c=>{"all_threads"in c&&n(3,f=c.all_threads)},[a,l,k,f,C]}class ge extends X{constructor(e){super(),Z(this,e,ve,me,te,{all_threads:3})}}function be(t){let e,n,f=`root {
			background-color: #242424;
			color: rgba(255, 255, 255, 0.87);
		}
		body {
			background-color: #242424;
			color: rgba(255, 255, 255, 0.87);
		}
		input {
			color-scheme: light dark;
		}`,a,l,h,b,k,C,c,g,D,P,L,$,T,d,i;return $=new ge({props:{all_threads:t[0].all_threads}}),{c(){e=_("meta"),n=_("style"),n.textContent=f,a=y(),l=_("div"),h=_("h1"),b=M("Cloverleaf Message Search ("),k=M(N),C=M(")"),c=y(),g=_("br"),D=y(),P=_("br"),L=y(),le($.$$.fragment),T=y(),d=_("br"),this.h()},l(r){const o=ne("svelte-1o3bo81",document.head);e=p(o,"META",{name:!0,content:!0}),n=p(o,"STYLE",{"data-svelte-h":!0}),ee(n)!=="svelte-68gpa"&&(n.textContent=f),o.forEach(v),a=S(r),l=p(r,"DIV",{class:!0});var u=B(l);h=p(u,"H1",{style:!0,class:!0});var w=B(h);b=R(w,"Cloverleaf Message Search ("),k=R(w,N),C=R(w,")"),w.forEach(v),c=S(u),g=p(u,"BR",{}),D=S(u),P=p(u,"BR",{}),L=S(u),ie($.$$.fragment,u),T=S(u),d=p(u,"BR",{}),u.forEach(v),this.h()},h(){document.title="Cloverleaf Message Search",E(e,"name","description"),E(e,"content",""),H(h,"color",t[1]),E(h,"class","svelte-1hcxbhj"),E(l,"class","app svelte-1hcxbhj")},m(r,o){s(document.head,e),s(document.head,n),I(r,a,o),I(r,l,o),s(l,h),s(h,b),s(h,k),s(h,C),s(l,c),s(l,g),s(l,D),s(l,P),s(l,L),ce($,l,null),s(l,T),s(l,d),i=!0},p(r,[o]){(!i||o&2)&&H(h,"color",r[1]);const u={};o&1&&(u.all_threads=r[0].all_threads),$.$set(u)},i(r){i||(he($.$$.fragment,r),i=!0)},o(r){de($.$$.fragment,r),i=!1},d(r){r&&(v(a),v(l)),v(e),v(n),ue($)}}}function $e(t,e,n){let{data:f}=e,a;return N.toLowerCase().includes("prod")?a="springgreen":a="navajowhite",t.$$set=l=>{"data"in l&&n(0,f=l.data)},[f,a]}class ke extends X{constructor(e){super(),Z(this,e,$e,be,re,{data:0})}}export{ke as component,Se as universal};
